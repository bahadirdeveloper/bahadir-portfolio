"use client"

import { useEffect, useRef, useState, useLayoutEffect } from "react"
import { gsap } from "gsap"
import { ScrollTrigger } from "gsap/ScrollTrigger"
import { motion, useScroll, useTransform } from "framer-motion"
import {
  Github,
  Linkedin,
  Mail,
  ExternalLink,
  Code,
  Palette,
  Zap,
  Globe,
  Star,
  Award,
  Users,
  Calendar,
  ArrowRight,
  ArrowLeft,
  ChevronDown,
  Menu,
  X,
} from "lucide-react"
import Link from "next/link"
import { AnimatePresence } from "framer-motion"
import SplashCursor from "../components/SplashCursor";

// Register GSAP plugins
if (typeof window !== "undefined") {
  gsap.registerPlugin(ScrollTrigger)
}

export default function Portfolio() {
  const containerRef = useRef<HTMLDivElement>(null)
  const [currentSection, setCurrentSection] = useState(0)
  const [isLoading, setIsLoading] = useState(true)
  const [activeTab, setActiveTab] = useState(0)
  const [currentQuote, setCurrentQuote] = useState(0)
  const [currentMessage, setCurrentMessage] = useState(0)
  const [isHovered, setIsHovered] = useState(false)
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 })
  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)

  const { scrollYProgress } = useScroll()
  const y = useTransform(scrollYProgress, [0, 1], ["0%", "50%"])

  // Portfolio Data - Türkçe içerik
  const portfolioData = {
    header: {
      logo: "/profile.png",
      title: "Bahadır'ın Portfolyosu",
      menu: ["Hakkımda", "Yetenekler", "Projeler", "Referanslar", "İletişim"]
    },
    hero: {
      name: "Bahadır Gemalmaz",
      title: "Web Tasarımcısı & Otomasyon Uzmanı",
      leftMessages: [
        "Kahvemi bitirmeden kod yazmam",
        "Pixel-perfect mi? Başka türlüsü var mıydı?",
        "Bir web sitesi 3 saniyede açılmazsa, o site benim değildir",
        "Tasarımda sadelik bir sanattır",
        "Düğmeye basınca çalışmıyorsa... neden orada?",
        "Gece 3'te deploy mu? Neden olmasın",
        "Kod yazmak meditasyondur",
        "Her sorun bir çözümle gelir",
        "Figma açmadan gün başlamaz",
        "React gibi sevilen bir şey varsa, o da kahve",
        "Sade ama etkileyici... tıpkı sitelerim gibi",
        "Otobüste bile tasarım düşünen adam",
        "Açıklamasız commit yapmam",
        "Yazılımda detay, hayatta zarafettir",
        "İyi bir arayüz, kötü bir fikri bile kurtarır",
        "Görselliği seviyorum ama hızdan taviz vermem"
      ],
      motivationalQuotes: [
        "Her fikir, kodla can bulur",
        "Bugünün çabası, yarının referansı",
        "Sadelik, ustalığın göstergesidir",
        "Hayal et, tasarla, uygula",
        "Bir satır kod, bin kelimeye bedeldir",
        "Düşünen geliştirici, üreten sanatçıdır",
        "Disiplin, yetenekten daha etkilidir",
        "Tasarım; ne eklediğin değil, neyi çıkardığındır",
        "Zaman geçer ama iyi kod kalır",
        "Bir gülümseme için tasarla, hız için kodla"
      ]
    },
    about: {
      photo: "/profile.png",
      description: [
        "Merhaba, ben Bahadır. Web tasarımı ve otomasyon alanlarında uzmanlaşmış, sade ve işlevsel çözümler geliştiren bir geliştiriciyim. Müşterilerime hızlı, güvenilir ve ihtiyaçlara özel dijital yapılar sunarken; her projeye tutkuyla yaklaşırım.",
        "Aynı zamanda Silifke Teknoloji Kulübü'nün kurucusuyum. Burada gençlerle birlikte \"vibe coding\" kültürüyle projeler geliştiriyor, yereldeki sorunları teknolojiyle çözüme dönüştürüyoruz. Amacımız; hem motivasyon hem gelir sağlayan, aynı zamanda milyon dolarlık potansiyele sahip fikirleri hayata geçirmek.",
        "Benim için teknoloji yalnızca bir iş değil; birlikte üretmenin, öğrenmenin ve büyümenin yolu. Doğru ekiple bir araya geldiğimizde, deniz kenarında kahvemizi yudumlarken bile dünyayı değiştirecek fikirler geliştirebileceğimize inanıyorum."
      ],
      socials: {
        github: "",
        linkedin: "",
        email: "",
        cv: "/cv.pdf"
      },
      references: [
        "https://www.simayhareketi.org",
        "https://www.effemimarlik.com.tr",
        "https://www.avaxsavunma.com.tr",
        "https://www.simayhareketi.com"
      ]
    },
    experience: {
      stats: [
        {"icon": "📁", "count": 7, "label": "Tamamlanan Proje"},
        {"icon": "👥", "count": 7, "label": "Mutlu Müşteri"},
        {"icon": "⏳", "count": 2, "label": "Yıllık Deneyim"},
        {"icon": "🚀", "count": 3, "label": "Aktif Proje"}
      ],
      tabs: ["Web Tasarımı", "Otomasyon Sistemleri", "Danışmanlık"]
    },
    skills: {
      technical: {
        "Frontend Geliştirme": ["HTML", "CSS", "JavaScript", "React"],
        "Tasarım & UX": ["Figma", "Photoshop", "Canva"],
        "Altyapı & Otomasyon": ["Node.js", "Firebase", "Supabase"],
        "Animasyon & Etkileşim": ["Framer Motion", "GSAP"]
      },
      softSkills: [
      { name: "Problem Çözme", description: "Sorunlardan Fırsat Yaratma", icon: "💡" },
      { name: "Takım Çalışması", description: "Kolektif Üretim", icon: "🤝" },
      { name: "Zaman Yönetimi", description: "Hızlı MVP Çıkartma", icon: "⚡" },
      { name: "Yaratıcılık", description: "Startup Vibe", icon: "🚀" },
      { name: "İletişim", description: "Topluluk İnşası", icon: "🌐" },
      { name: "Adaptasyon", description: "Yeni Teknolojilere Hızlı Uyum", icon: "🔄" },
      { name: "Analitik Düşünme", description: "Veri Odaklı Yaklaşım", icon: "📊" },
      { name: "Kritik Düşünme", description: "Stratejik Bakış", icon: "🎯" }
    ],
      tools: {
        "🚀 Geliştirme & Yayınlama": ["VSCode", "Cursor", "Git", "Vercel", "Netlify", "Supabase"],
        "⚡ Otomasyon & Tasarım": ["n8n", "ChatGPT", "Figma", "Postman"]
      }
    },
    projects: {
      featured: [
        {
          title: "Effe Mimarlık",
          description: "Site ve villa projeleri için kurumsal web sitesi",
          image: "/projects/effe-mimarlik.svg",
          link: "https://www.effemimarlik.com.tr",
          tech: ["WordPress", "PHP", "CSS", "Responsive Design"],
          category: "Kurumsal Web Sitesi",
          status: "Tamamlandı"
        },
        {
          title: "Vertex Yapı",
          description: "Kaba inşaat firması için profesyonel web sitesi",
          image: "/projects/vertex-yapi.svg",
          link: "https://www.vertexyapi.com",
          tech: ["React", "Next.js", "Tailwind CSS", "SEO"],
          category: "Kurumsal Web Sitesi",
          status: "Tamamlandı"
        },
        {
          title: "Avax Savunma",
          description: "Askeri outdoor giyim firması için e-ticaret sitesi",
          image: "/projects/avax-savunma.svg",
          link: "https://www.avaxsavunma.com.tr",
          tech: ["React", "Node.js", "MongoDB", "E-commerce"],
          category: "E-ticaret Sitesi",
          status: "Tamamlandı"
        },
        {
          title: "Simay.tech",
          description: "Web sitesi ve yapay zeka sesli asistan otomasyon sistemleri",
          image: "/projects/simay-tech.svg",
          link: "https://simay.tech",
          tech: ["AI/ML", "React", "Python", "Automation"],
          category: "AI & Otomasyon",
          status: "Tamamlandı"
        },
        {
          title: "Bahadır Gemalmaz",
          description: "Kişisel portfolyo ve profesyonel web sitesi",
          image: "/projects/bahadir-portfolio.svg",
          link: "https://www.bahadirgemalmaz.com",
          tech: ["Next.js", "React", "Tailwind CSS", "GSAP"],
          category: "Portfolyo Sitesi",
          status: "Tamamlandı"
        },
        {
          title: "Silifke Teknoloji",
          description: "Teknoloji ve inovasyon odaklı organizasyon web sitesi",
          image: "/projects/silifke-teknoloji.svg",
          link: "https://www.silifketeknoloji.org",
          tech: ["Next.js", "React", "Tailwind CSS", "Modern Web"],
          category: "Teknoloji Organizasyonu",
          status: "Tamamlandı"
        }
      ]
    },
    testimonials: [
      {
        name: "Ahmet Yılmaz",
        role: "Simay Hareketi Başkanı",
        content: "Bahadır'ın profesyonel yaklaşımı ve kaliteli işi sayesinde hayalimizdeki web sitesine kavuştuk. Süreç boyunca her adımda bizi bilgilendirdi ve beklentilerimizi aştı.",
        avatar: "/placeholder-user.jpg",
        rating: 5,
        company: "Simay Hareketi"
      },
      {
        name: "Ayşe Demir",
        role: "Effe Mimarlık Kurucusu",
        content: "Hızlı, güvenilir ve yaratıcı çözümler. Mimarlık firmamız için mükemmel bir web sitesi tasarladı. Müşteri memnuniyetimiz %100 arttı.",
        avatar: "/placeholder-user.jpg",
        rating: 5,
        company: "Effe Mimarlık"
      },
      {
        name: "Mehmet Kaya",
        role: "Avax Savunma CEO",
        content: "Teknik bilgisi ve müşteri odaklı yaklaşımı ile beklentilerimizi aştı. E-ticaret sitemiz satışlarımızı %300 artırdı. Kesinlikle tavsiye ederim.",
        avatar: "/placeholder-user.jpg",
        rating: 5,
        company: "Avax Savunma"
      },
      {
        name: "Fatma Özkan",
        role: "Vertex Yapı Genel Müdürü",
        content: "İnşaat sektöründe dijital varlığımızı güçlendirdi. Profesyonel yaklaşım ve kaliteli iş. Müşterilerimiz artık bizi daha kolay bulabiliyor.",
        avatar: "/placeholder-user.jpg",
        rating: 5,
        company: "Vertex Yapı"
      },
      {
        name: "Ali Yıldız",
        role: "Simay.tech Kurucusu",
        content: "AI ve otomasyon projelerimizde müthiş bir iş çıkardı. Teknik bilgisi ve yaratıcılığı ile projelerimizi hayata geçirdi. Gerçek bir uzman.",
        avatar: "/placeholder-user.jpg",
        rating: 5,
        company: "Simay.tech"
      },
      {
        name: "Teknoloji Meraklıları",
        role: "Silifke Teknoloji Kulübü Üyeleri",
        content: "Bahadır'ın liderliğinde teknoloji projelerimizi hayata geçirdik. Hem öğrendik hem ürettik. Gerçek bir vizyoner ve mentor.",
        avatar: "/placeholder-user.jpg",
        rating: 5,
        company: "Silifke Teknoloji"
      }
    ],
    contact: {
      title: "Projenizi Konuşalım",
      subtitle: "Hayalinizdeki projeyi gerçeğe dönüştürmek için buradayım",
      email: "bahadir@example.com",
      phone: "+90 555 123 45 67",
      location: "İstanbul, Türkiye"
    }
  }

  useLayoutEffect(() => {
    const ctx = gsap.context(() => {
      // Initial animations
      gsap.fromTo(
        ".hero-content",
        { opacity: 0, y: 100 },
        { opacity: 1, y: 0, duration: 1.5, ease: "power3.out" }
      )

      gsap.fromTo(
        ".floating-message",
        { opacity: 0, x: -100 },
        { opacity: 1, x: 0, duration: 1, stagger: 0.2, ease: "power2.out" }
      )

      // Scroll animations
      gsap.fromTo(
        ".stats-item",
        { opacity: 0, y: 50 },
        {
          opacity: 1,
          y: 0,
          duration: 0.8,
          stagger: 0.1,
          ease: "power2.out",
          scrollTrigger: {
            trigger: ".stats-section",
            start: "top 80%",
            end: "bottom 20%",
            toggleActions: "play none none reverse"
          }
        }
      )

      gsap.fromTo(
        ".skill-card",
        { opacity: 0, scale: 0.8 },
        {
          opacity: 1,
          scale: 1,
          duration: 0.6,
          stagger: 0.1,
          ease: "back.out(1.7)",
          scrollTrigger: {
            trigger: ".skills-section",
            start: "top 80%",
            end: "bottom 20%",
            toggleActions: "play none none reverse"
          }
        }
      )

      gsap.fromTo(
        ".project-card",
        { opacity: 0, y: 100 },
        {
          opacity: 1,
          y: 0,
          duration: 0.8,
          stagger: 0.2,
          ease: "power2.out",
          scrollTrigger: {
            trigger: ".projects-section",
            start: "top 80%",
            end: "bottom 20%",
            toggleActions: "play none none reverse"
          }
        }
      )

      gsap.fromTo(
        ".testimonial-card",
        { opacity: 0, x: 100 },
        {
          opacity: 1,
          x: 0,
          duration: 0.8,
          stagger: 0.3,
          ease: "power2.out",
          scrollTrigger: {
            trigger: ".testimonials-section",
            start: "top 80%",
            end: "bottom 20%",
            toggleActions: "play none none reverse"
          }
        }
      )
    }, containerRef)

    return () => ctx.revert()
  }, [])

  useEffect(() => {
    // Quote rotation
    const quoteInterval = setInterval(() => {
      setCurrentQuote((prev) => (prev + 1) % portfolioData.hero.motivationalQuotes.length)
    }, 5000)

    // Message rotation
    const messageInterval = setInterval(() => {
      setCurrentMessage((prev) => (prev + 1) % portfolioData.hero.leftMessages.length)
    }, 3000)

    // Mouse tracking
    const handleMouseMove = (e: MouseEvent) => {
      setMousePosition({ x: e.clientX, y: e.clientY })
    }

    window.addEventListener("mousemove", handleMouseMove)

    return () => {
      clearInterval(quoteInterval)
      clearInterval(messageInterval)
      window.removeEventListener("mousemove", handleMouseMove)
    }
  }, [portfolioData.hero.motivationalQuotes.length, portfolioData.hero.leftMessages.length])

  useEffect(() => {
    // Loading simulation
    const timer = setTimeout(() => {
      setIsLoading(false)
    }, 2000)

    return () => clearTimeout(timer)
  }, [])

  const scrollToSection = (sectionIndex: number) => {
    const sections = document.querySelectorAll("section")
    if (sections[sectionIndex]) {
      sections[sectionIndex].scrollIntoView({ behavior: "smooth" })
    }
    setCurrentSection(sectionIndex)
  }

  if (isLoading) {
    return (
      <div className="min-h-screen bg-black flex items-center justify-center">
        <div className="text-center">
          <div className="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
          <p className="text-white text-lg">Yükleniyor...</p>
        </div>
      </div>
    )
